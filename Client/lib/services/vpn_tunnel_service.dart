import "package:flutter/foundation.dart";enum SplitMode{all,exclude,include}class SplitTunnelingConfig{final SplitMode mode;final List<String> apps;final List<String> domains;final bool bypassLAN;SplitTunnelingConfig({this.mode=SplitMode.all,this.apps=const[],this.domains=const[],this.bypassLAN=true});}class KillSwitchConfig{final bool enabled;final bool blockOnDisconnect;final bool allowLAN;KillSwitchConfig({this.enabled=false,this.blockOnDisconnect=true,this.allowLAN=true});}class VPNTunnelService{static final VPNTunnelService _i=VPNTunnelService._();factory VPNTunnelService()=>_i;VPNTunnelService._();SplitTunnelingConfig _splitConfig=SplitTunnelingConfig();KillSwitchConfig _killSwitch=KillSwitchConfig();SplitTunnelingConfig get splitConfig=>_splitConfig;KillSwitchConfig get killSwitch=>_killSwitch;void setSplitTunneling(SplitTunnelingConfig c){_splitConfig=c;}void setKillSwitch(KillSwitchConfig c){_killSwitch=c;}void addExcludedApp(String pkg){final a=List<String>.from(_splitConfig.apps)..add(pkg);_splitConfig=SplitTunnelingConfig(mode:_splitConfig.mode,apps:a,domains:_splitConfig.domains,bypassLAN:_splitConfig.bypassLAN);}void removeExcludedApp(String pkg){final a=_splitConfig.apps.where((e)=>e\!=pkg).toList();_splitConfig=SplitTunnelingConfig(mode:_splitConfig.mode,apps:a,domains:_splitConfig.domains,bypassLAN:_splitConfig.bypassLAN);}void addExcludedDomain(String d){final doms=List<String>.from(_splitConfig.domains)..add(d);_splitConfig=SplitTunnelingConfig(mode:_splitConfig.mode,apps:_splitConfig.apps,domains:doms,bypassLAN:_splitConfig.bypassLAN);}List<String> getInstalledApps(){return["com.whatsapp","com.instagram.android","com.twitter.android","org.telegram.messenger","com.google.android.youtube"];}}
